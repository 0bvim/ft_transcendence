# =============================================================================
# FT_TRANSCENDENCE - ROOT ENVIRONMENT CONFIGURATION
# =============================================================================
# This is the main environment file for the entire ft_transcendence project
# Copy this file to .env and update values as needed
#
# Individual services also have their own env.example files:
# - packages/ms-auth/env.example
# - packages/ms-frontend/env.example  
# - packages/ms-game/env.example
# - packages/tournament/env.example
# - packages/blockchain/env.example

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================
PROJECT_NAME=ft_transcendence
ENVIRONMENT=development
NETWORK_NAME=ft-net

# =============================================================================
# MICROSERVICES CONFIGURATION
# =============================================================================

# Frontend Service (SPA)
FRONTEND_PORT=3010
FRONTEND_HOST=localhost

# Authentication Service
AUTH_PORT=3001
AUTH_HOST=localhost

# Game Service
GAME_PORT=3003
GAME_HOST=localhost

# Tournament Service
TOURNAMENT_PORT=4243
TOURNAMENT_HOST=localhost

# Blockchain Service
BLOCKCHAIN_PORT=3004
BLOCKCHAIN_HOST=localhost

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# SQLite databases (per service)
DATABASE_URL=sqlite:///app/data/ft_transcendence.db
AUTH_DATABASE_URL=file:./prisma/dev.db
TOURNAMENT_DATABASE_URL=file:./tournament.db

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# Generate strong secrets with:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

JWT_SECRET=your-super-secret-jwt-key-here
SESSION_SECRET=your-session-secret-here
SALT_LEN=6

# Google OAuth Configuration
# Obtain from: https://console.developers.google.com/
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# WebAuthn 2FA Configuration  
WEBAUTHN_RP_ID=localhost
WEBAUTHN_RP_NAME=ft_transcendence
WEBAUTHN_ORIGIN=http://localhost:3010

# =============================================================================
# BLOCKCHAIN CONFIGURATION (LOCAL DEVELOPMENT)
# =============================================================================

# Local Blockchain Node (Default - Recommended)
AVALANCHE_RPC_URL=http://blockchain-node:8545
AVALANCHE_CHAIN_ID=1337
BLOCKCHAIN_PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

# Smart Contract (auto-deployed in local mode)
TOURNAMENT_SCORING_CONTRACT_ADDRESS=

# Gas Configuration
GAS_LIMIT=3000000
GAS_PRICE=20000000000

# Alternative: Avalanche Fuji Testnet (requires manual setup)
# AVALANCHE_RPC_URL=https://api.avax-test.network/ext/bc/C/rpc
# AVALANCHE_CHAIN_ID=43113
# BLOCKCHAIN_PRIVATE_KEY=your_generated_private_key_here

# =============================================================================
# DEVOPS - ELK STACK (LOGGING)
# =============================================================================

# Elasticsearch Configuration
ELASTICSEARCH_VERSION=9.0.2
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_DISCOVERY_TYPE=single-node
ELASTICSEARCH_JAVA_OPTS=-Xms512m -Xmx512m
ELASTICSEARCH_SECURITY_ENABLED=false
ELASTICSEARCH_JAVA_OPTIONS=-XX:UseSVE=0

# Kibana Configuration
KIBANA_VERSION=9.0.2
KIBANA_PORT=5601
KIBANA_ELASTICSEARCH_HOSTS=http://elasticsearch:9200
KIBANA_SECURITY_ENABLED=false
KIBANA_JAVA_OPTIONS=-XX:UseSVE=0

# Logstash Configuration
LOGSTASH_VERSION=9.0.2
LOGSTASH_TCP_PORT=5001
LOGSTASH_HTTP_PORT=9600
LOGSTASH_JAVA_OPTS=-Xmx256m -Xms256m

# =============================================================================
# DEVOPS - MONITORING (PROMETHEUS & GRAFANA)
# =============================================================================

# Prometheus Configuration
PROMETHEUS_PORT=9090
PROMETHEUS_CONFIG_PATH=./devops/prometheus/prometheus.yml
PROMETHEUS_ALERT_PATH=./devops/prometheus/alerts.yml

# Grafana Configuration
GRAFANA_PORT=3002
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ALLOW_SIGN_UP=false
GRAFANA_PROVISIONING_PATH=./devops/grafana/provisioning

# =============================================================================
# OBSERVABILITY & LOGGING  
# =============================================================================
LOG_LEVEL=info
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true

# Service-specific logging
OBSERVABILITY_SERVICE_NAME=ft-transcendence

# Logstash connection (for all services)
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5001

# =============================================================================
# SERVICE HEALTH CHECK CONFIGURATION
# =============================================================================
ELASTICSEARCH_HEALTH_CHECK_INTERVAL=30s
ELASTICSEARCH_HEALTH_CHECK_TIMEOUT=10s
ELASTICSEARCH_HEALTH_CHECK_RETRIES=5

# =============================================================================
# VOLUME CONFIGURATION
# =============================================================================
ELASTICSEARCH_DATA_VOLUME=esdata
GRAFANA_DATA_VOLUME=grafana-data

# =============================================================================
# CROSS-SERVICE COMMUNICATION URLS
# =============================================================================
# These are used by services to communicate with each other

# API Configuration
API_BASE_URL=http://localhost:3001/api

# Internal service URLs (container-to-container)
TOURNAMENT_SERVICE_URL=http://tournament:4243
AUTH_SERVICE_URL=http://authentication:3001
GAME_SERVICE_URL=http://game:3003
BLOCKCHAIN_SERVICE_URL=http://blockchain:3004
FRONTEND_SERVICE_URL=http://frontend:3010

# External URLs (browser access)
FRONTEND_URL=http://localhost:3010

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Game settings
GAME_MODE=pong
ENABLE_AI=true
MAX_PLAYERS_PER_GAME=2

# Tournament settings
DEFAULT_MAX_PARTICIPANTS=8
DEFAULT_TOURNAMENT_TYPE=single_elimination
ENABLE_BLOCKCHAIN_SCORES=true

# Frontend settings
VITE_APP_TITLE=ft_transcendence
VITE_API_URL=http://localhost:3001
VITE_WS_URL=ws://localhost:3003

# WebSocket configuration
ENABLE_WEBSOCKETS=true
WS_HEARTBEAT_INTERVAL=30000
MAX_CONNECTIONS_PER_IP=10
